<md-content id="grid_{{gridId}}" flex class="mdtTable md-whiteframe-z1" layout="column" style="width:100%;box-shadow: none;overflow-x: hidden;{{tableDataStorageService.tableWidthStyle}}" ng-cloak ng-class="{'invisible': (!tableIsReady)}">
    <div ng-hide="tableDataStorageService.storage.length" flex layout="column" layout-align="center center" style="height: 100%">
        <span class="md-subhead" ng-bind="mdtEmptyTitle"></span>
    </div>
    <!--
        mdt-sort-handler
        md-ink-ripple="{{rippleEffect}}"
    -->

    <div id="visible-header" class="row-header" style="display: block" ng-show="tableDataStorageService.storage.length && !mtHideHeader && tableDataStorageService.tableWidth">
        <div ng-cloak layout="row" flex>
            <div ng-if="!sortable"
                 ng-style="headerRowData.style"
                 class="th"
                 ng-class="{'th-last':$last}"
                 mdt-add-align-class="headerRowData.alignRule"
                 ng-repeat="headerRowData in tableDataStorageService.header | filter: {enabled : true} track by $index" ng-class="headerRowData.class">
                <mdt-generated-header-cell-content></mdt-generated-header-cell-content>
            </div>

            <div ng-if="sortable"
                 ng-style="headerRowData.style"
                 class="th"
                 ng-class="{'th-last':$last}"
                 mdt-sort-handler
                 md-ink-ripple="{{rippleEffect}}"
                 mdt-add-align-class="headerRowData.alignRule"
                 ng-repeat="headerRowData in tableDataStorageService.header | filter: {enabled : true} track by $index" ng-class="headerRowData.class">
                <mdt-generated-header-cell-content></mdt-generated-header-cell-content>
            </div>
            <div class="th-scroll flex-order-{{tableDataStorageService.header.length}}" ng-if="isScrollVisible && scrollWidth" ng-style="{'min-width':scrollWidth}"></div>
        </div>
    </div>
    <div class="data-container" ng-class="{'dc-selectable':isSelectable}" flex layout="column" ng-show="tableDataStorageService.storage.length && tableDataStorageService.tableWidth && isSelectable">
        <md-list flex mtd-context-menu
                 ng-if="isSelectable"
                 style="position: relative"
                 menu-list="menuList"
                 on-menu-selected="onMenuSelected(menuItem)"
                 on-popup="onPopup()">
            <md-virtual-repeat-container ng-style="mtHideHeader && {'top':'10px'} || {'top':'0px'}" style="bottom:0;left:0;right:0;width:100%;position: absolute">
                <md-list-item md-virtual-repeat="rowData in tableDataStorageService.storage"

                              aria-label="{{$index}}"
                              ng-class="{'selectedRow': rowData.optionList.selected}"
                              class="row-container"
                              on-long-press="mdtPaginationHelper.selectRow(rowData)"
                              ng-dblclick="mdtPaginationHelper.dblclick(rowData)"
                              mtd-right-click="mdtPaginationHelper.selectRow(rowData)"
                              mdt-table-row
                              data-grid-id="cacheId"
                              data-selectable="selectable"
                              data-on-click="mdtPaginationHelper.onTouch(rowData)"
                              data-props="tableDataStorageService.header"
                              data-model="rowData">
                </md-list-item>
            </md-virtual-repeat-container>
        </md-list>
    </div>
    <div class="data-container" ng-class="{'dc-nonselectable':!isSelectable}" flex layout="column" ng-show="tableDataStorageService.storage.length && tableDataStorageService.tableWidth && !isSelectable">
        <md-list flex style="position: relative" ng-if="!isSelectable">

            <md-virtual-repeat-container ng-style="mtHideHeader && {'top':'10px'} || {'top':'0px'}" style="bottom:0;left:0;right:0;width:100%;position: absolute">
                <md-list-item md-virtual-repeat="rowData in tableDataStorageService.storage"

                              aria-label="{{$index}}"
                              class="row-container"
                              on-long-press="mdtPaginationHelper.selectRow(rowData)"
                              ng-dblclick="mdtPaginationHelper.dblclick(rowData)"
                              mtd-right-click="mdtPaginationHelper.selectRow(rowData)"
                              mdt-table-row
                              data-grid-id="cacheId"
                              data-selectable="selectable"
                              data-on-click="mdtPaginationHelper.onTouch(rowData)"
                              data-props="tableDataStorageService.header"
                              data-model="rowData">
                </md-list-item>
            </md-virtual-repeat-container>
        </md-list>
    </div>
</md-content>
